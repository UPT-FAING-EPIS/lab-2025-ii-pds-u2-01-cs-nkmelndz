<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>SESION DE LABORATORIO N&#176; 01: PATRONES DE DISE&#209;O CREACIONALES | Bank App </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="SESION DE LABORATORIO N&#176; 01: PATRONES DE DISE&#209;O CREACIONALES | Bank App ">
      
      
      <link rel="icon" href="favicon.ico">
      <link rel="stylesheet" href="public/docfx.min.css">
      <link rel="stylesheet" href="public/main.css">
      <meta name="docfx:navrel" content="toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="">
      
      
      <meta name="docfx:docurl" content="https://github.com/UPT-FAING-EPIS/lab-2025-ii-pds-u2-01-cs-nkmelndz/blob/main/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="index.html">
            <img id="logo" class="svg" src="logo.svg" alt="Bank.App">
            Bank.App
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">

<p><a href="https://classroom.github.com/a/91GCXWBT"><img src="https://classroom.github.com/assets/deadline-readme-button-22041afd0340ce965d47ae6ef1cefeee28c7c493a6346c4f15d667ab976d596c.svg" alt="Review Assignment Due Date"></a>
<a href="https://classroom.github.com/open-in-codespaces?assignment_repo_id=21107698"><img src="https://classroom.github.com/assets/launch-codespace-2972f46106e565e64193e422d61a12cf1da4916b45550586e14ef0a7c637dd04.svg" alt="Open in Codespaces"></a></p>
<h1 id="sesion-de-laboratorio-n-01-patrones-de-diseño-creacionales">SESION DE LABORATORIO N° 01: PATRONES DE DISEÑO CREACIONALES</h1>
<h4 id="nombre">Nombre:</h4>
<h2 id="objetivos">OBJETIVOS</h2>
<ul>
<li>Comprender el funcionamiento de algunos patrones de diseño de software del tipo creacional.</li>
</ul>
<h2 id="requerimientos">REQUERIMIENTOS</h2>
<ul>
<li>Conocimientos:
<ul>
<li>Conocimientos básicos de Bash (powershell).</li>
<li>Conocimientos básicos de Contenedores (Docker).</li>
</ul>
</li>
<li>Hardware:
<ul>
<li>Virtualization activada en el BIOS..</li>
<li>CPU SLAT-capable feature.</li>
<li>Al menos 4GB de RAM.</li>
</ul>
</li>
<li>Software:
<ul>
<li>Windows 10 64bit: Pro, Enterprise o Education (1607 Anniversary Update, Build 14393 o Superior)</li>
<li>Docker Desktop</li>
<li>Powershell versión 7.x</li>
<li>Net 8 o superior</li>
<li>Visual Studio Code
<ul>
<li>Markdown Preview Mermaid Support</li>
<li>Mermaid Markdown Syntax Highlighting</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="consideraciones-iniciales">CONSIDERACIONES INICIALES</h2>
<ul>
<li>Clonar el repositorio mediante git para tener los recursos necesarios</li>
</ul>
<h2 id="desarrollo">DESARROLLO</h2>
<h3 id="parte-i-factory-design-pattern">PARTE I: Factory Design Pattern</h3>
<p><img src="https://github.com/UPT-FAING-EPIS/SI889_PDS/assets/10199939/f810f99d-efe2-4ec8-a04c-83dee3872787" alt="image"></p>
<ol>
<li>Iniciar la aplicación Powershell o Windows Terminal en modo administrador</li>
<li>Ejecutar el siguiente comando para crear una nueva solución</li>
</ol>
<pre><code>dotnet new sln -o Bank
dotnet tool install -g dll2mmd
dotnet tool install -g docfx
dotnet tool install -g dotnet-reportgenerator-globaltool
</code></pre>
<ol start="3">
<li>Acceder a la solución creada y ejecutar el siguiente comando para crear una nueva libreria de clases y adicionarla a la solución actual.</li>
</ol>
<pre><code>cd Bank
dotnet new classlib -o Bank.Domain
dotnet sln add ./Bank.Domain/Bank.Domain.csproj
</code></pre>
<ol start="4">
<li>Ejecutar el siguiente comando para crear un nuevo proyecto de pruebas y adicionarla a la solución actual</li>
</ol>
<pre><code>dotnet new nunit -o Bank.Domain.Tests
dotnet sln add ./Bank.Domain.Tests/Bank.Domain.Tests.csproj
dotnet add ./Bank.Domain.Tests/Bank.Domain.Tests.csproj reference ./Bank.Domain/Bank.Domain.csproj
</code></pre>
<ol start="5">
<li><p>Iniciar Visual Studio Code (VS Code) abriendo el folder de la solución como proyecto. En el proyecto Bank.Domain, si existe un archivo Class1.cs proceder a eliminarlo. Asimismo en el proyecto Bank.Domain.Tests si existiese un archivo UnitTest1.cs, también proceder a eliminarlo.</p>
</li>
<li><p>En VS Code, en el proyecto Bank.Domain proceder a crear el archivo ICreditCard.cs e introducir el siguiente código:</p>
</li>
</ol>
<pre><code class="lang-C#">namespace Bank.Domain
{
    public interface ICreditCard
    {
        string GetCardType();
        int GetCreditLimit();
        int GetAnnualCharge();
    }
}
</code></pre>
<ol start="7">
<li>En el proyecto Bank.Domain proceder a crear las implementaciones de a interfaz creada en el paso previo para eso añadimos los archivos:</li>
</ol>
<blockquote>
<p>MoneyBack.cs</p>
</blockquote>
<pre><code class="lang-C#">namespace Bank.Domain
{
    public class MoneyBack : ICreditCard
    {
        public string GetCardType()
        {
            return &quot;MoneyBack&quot;;
        }
        public int GetCreditLimit()
        {
            return 15000;
        }
        public int GetAnnualCharge()
        {
            return 500;
        }
    }
}
</code></pre>
<blockquote>
<p>Platinum.cs</p>
</blockquote>
<pre><code class="lang-C#">namespace Bank.Domain
{
    public class Platinum : ICreditCard
    {
        public string GetCardType()
        {
            return &quot;Platinum Plus&quot;;
        }
        public int GetCreditLimit()
        {
            return 35000;
        }
        public int GetAnnualCharge()
        {
            return 2000;
        }
    }
}
</code></pre>
<blockquote>
<p>Titanium.cs</p>
</blockquote>
<pre><code class="lang-C#">namespace Bank.Domain
{
    public class Titanium : ICreditCard
    {
        public string GetCardType()
        {
            return &quot;Titanium Edge&quot;;
        }
        public int GetCreditLimit()
        {
            return 25000;
        }
        public int GetAnnualCharge()
        {
            return 1500;
        }
    }
}
</code></pre>
<ol start="8">
<li>Luego en el proyecto Bank.Domain.Tests añadir un nuevo archivo CreditCardTests.cs e introducir el siguiente código:</li>
</ol>
<pre><code class="lang-C#">using Bank.Domain;
using NUnit.Framework;

namespace Bank.Domain.Tests
{
    public class CreditCardTests
    {
        [Test]
        public void GivenCreditTypeSelected_WhenRequestCreditCard_ThenNewValidCreditCard()
        {
            string cardType = &quot;MoneyBack&quot;;
            ICreditCard? cardDetails = null;
            if (cardType == &quot;MoneyBack&quot;)
            {
                cardDetails = new MoneyBack();
            }
            else if (cardType == &quot;Titanium&quot;)
            {
                cardDetails = new Titanium();
            }
            else if (cardType == &quot;Platinum&quot;)
            {
                cardDetails = new Platinum();
            }

            Assert.IsNotNull(cardDetails);
            Assert.IsNotEmpty(cardDetails.GetCardType());
            Assert.GreaterOrEqual(cardDetails.GetCreditLimit(), 0);
            Assert.GreaterOrEqual(cardDetails.GetAnnualCharge(), 0);
        }
    }
}
</code></pre>
<ol start="9">
<li>Ahora necesitamos comprobar las pruebas contruidas para eso abrir un terminal en VS Code (CTRL + Ñ) o vuelva al terminal anteriormente abierto, y ejecutar los comandos:</li>
</ol>
<pre><code class="lang-Bash">dotnet test --collect:&quot;XPlat Code Coverage&quot;
</code></pre>
<ol start="10">
<li>Si las pruebas se ejecutaron correctamente debera aparcer un resultado similar al siguiente:</li>
</ol>
<pre><code class="lang-Bash">Passed!  - Failed:     0, Passed:     1, Skipped:     0, Total:     1, Duration: 5 ms
</code></pre>
<ol start="11">
<li>Funciona pero ¿es correcta la implementación del código? ¿Qué problemas tiene esta implementación?</li>
</ol>
<ul>
<li>Primero tenemos un problema de Alto Acoplamiento entre la clase de prueba y las clases productos (MoneyBack, Titanium y Platinum). Asi que cuando hay un cambio en una d elas clases todas las demàs deberan ser cambiadas.</li>
<li>Segundo, si se adiciona un nuevo tipo de tarjeta de crédito, necesitamos hacer cambios en la lògica de creación que se encuentra en el metod de prueba, adicionando una nueva condición IF-ELSE lo cual no solo complica el desarrollo, sino también el proceso pruebas.</li>
</ul>
<ol start="12">
<li>Para solucionar los problemas anteriores mencionados utilizaremos el patrón de diseño FABRICA, para lo cual ahora en el proyecto Bank.Domain proceder a agregar el archivo CreditCarFactory.cs con el siguiente código:</li>
</ol>
<pre><code class="lang-C#">namespace Bank.Domain
{
    public class CreditCardFactory
    {
        public static ICreditCard GetCreditCard(string cardType)
        {
            ICreditCard? cardDetails = null;
            if (cardType == &quot;MoneyBack&quot;)
            {
                cardDetails = new MoneyBack();
            }
            else if (cardType == &quot;Titanium&quot;)
            {
                cardDetails = new Titanium();
            }
            else if (cardType == &quot;Platinum&quot;)
            {
                cardDetails = new Platinum();
            }
            return cardDetails; 
        }
    }
}
</code></pre>
<ol start="13">
<li>Adicionalmente modificar la clase de pruebas CreditCardTests, con el siguiente código:</li>
</ol>
<pre><code class="lang-C#">using Bank.Domain;
using NUnit.Framework;

namespace Bank.Domain.Tests
{
    public class CreditCardTests
    {
        [Test]
        public void GivenCreditTypeSelected_WhenRequestCreditCard_ThenNewValidCreditCard()
        {
            string cardType = &quot;MoneyBack&quot;;
            ICreditCard? cardDetails = CreditCardFactory.GetCreditCard(cardType);
            Assert.IsNotNull(cardDetails);
            Assert.IsNotEmpty(cardDetails.GetCardType());
            Assert.GreaterOrEqual(cardDetails.GetCreditLimit(), 0);
            Assert.GreaterOrEqual(cardDetails.GetAnnualCharge(), 0);
        }
    }
}
</code></pre>
<ol start="14">
<li><p>Al ejecutar nuevamente el paso 9 deberia seguir funcionando correctamente.</p>
</li>
<li><p>Con esto se aplicado el patrón de diseño FABRICA de la siguiente manera:
<img src="https://github.com/UPT-FAING-EPIS/SI889_PDS/assets/10199939/bae74678-32e7-454f-96dc-bf4f357c676c" alt="image"></p>
</li>
</ol>
<blockquote>
<p>Pero con este patrón se ha solucionado parcialmente los problemas indicados en el punto 11, en especifico solo se ha reducido en cierto porcentaje el Alto Acoplamiento.</p>
</blockquote>
<ol start="16">
<li>En el terminal, ejecutar el siguiente comando para generar el diagrama de clases respectivo</li>
</ol>
<pre><code class="lang-Bash">dll2mmd -f Bank.Domain/bin/Debug/net8.0/Bank.Domain.dll -o disenio.md
</code></pre>
<h3 id="parte-ii-factory-method-design-pattern">PARTE II: Factory Method Design Pattern</h3>
<p><img src="https://github.com/UPT-FAING-EPIS/SI889_PDS/assets/10199939/09109954-6f0f-4db3-8449-c82b4abcfa4d" alt="image"></p>
<ol>
<li>Utilizando el proyecto de la primera parte proceder a crear el archivo CreditCardAbstractMethod.cs en el proyecto Bank.Domain</li>
</ol>
<pre><code class="lang-C#">namespace Bank.Domain
{
    public abstract class CreditCardFactoryMethod
    {
        protected abstract ICreditCard MakeProduct();
        // Also note that The Creator's primary responsibility is not creating products. 
        // Usually, it contains some core business logic that relies on Product objects, returned by the factory method. 
        public ICreditCard CreateProduct()
        {
            //Call the MakeProduct which will create and return the appropriate object 
            ICreditCard creditCard = this.MakeProduct();
            //Return the Object to the Client
            return creditCard;
        }
    }
}
</code></pre>
<ol start="2">
<li>En el Visual Studio Code, proceder a crear las implementaciones de la clase abstracta anterior para cada producto, crear los siguientes archivos en el proyecto Bank.Domain:</li>
</ol>
<blockquote>
<p>MoneyBackFactoryMethod.cs</p>
</blockquote>
<pre><code class="lang-C#">namespace Bank.Domain
{
    public class MoneyBackFactoryMethod : CreditCardFactoryMethod
    {
        protected override ICreditCard MakeProduct()
        {
            ICreditCard product = new MoneyBack();
            return product;
        }
    }
}
</code></pre>
<blockquote>
<p>PlatinumFactoryMethod.cs</p>
</blockquote>
<pre><code class="lang-C#">namespace Bank.Domain
{
    public class PlatinumFactoryMethod: CreditCardFactoryMethod
    {
        protected override ICreditCard MakeProduct()
        {
            ICreditCard product = new Platinum();
            return product;
        }
    }
}
</code></pre>
<blockquote>
<p>TitaniumFactoryMethod.cs</p>
</blockquote>
<pre><code class="lang-C#">namespace Bank.Domain
{
    public class TitaniumFactoryMethod : CreditCardFactoryMethod
    {
        protected override ICreditCard MakeProduct()
        {
            ICreditCard product = new Titanium();
            return product;
        }
    }
}
</code></pre>
<ol start="3">
<li>Para probar esta implementacón, modificar la clase de pruebas CreditCardTests y adicionar los siguientes métodos:</li>
</ol>
<pre><code class="lang-C#">        [Test]
        public void GivenCreditTypePlatinumChoosen_WhenRequestCreditCard_ThenNewValidCreditCard()
        {
            ICreditCard creditCard = new PlatinumFactoryMethod().CreateProduct();
            Assert.IsNotNull(creditCard);
            Assert.IsNotEmpty(creditCard.GetCardType());
            Assert.GreaterOrEqual(creditCard.GetCreditLimit(), 0);
            Assert.GreaterOrEqual(creditCard.GetAnnualCharge(), 0);
        }

        [Test]
        public void GivenCreditTypeTitaniumChoosen_WhenRequestCreditCard_ThenNewValidCreditCard()
        {
            ICreditCard creditCard = new TitaniumFactoryMethod().CreateProduct();
            Assert.IsNotNull(creditCard);
            Assert.IsNotEmpty(creditCard.GetCardType());
            Assert.AreEqual(creditCard.GetCardType(),&quot;Titanium Edge&quot;);
            Assert.GreaterOrEqual(creditCard.GetCreditLimit(), 0);
            Assert.GreaterOrEqual(creditCard.GetAnnualCharge(), 0);
        }
</code></pre>
<ol start="4">
<li>Ejecutar nuevamente el paso 9 (Parte I) para lo cual se obtendra una respuesta similar a la siguiente:</li>
</ol>
<pre><code class="lang-Bash">Passed!  - Failed:     0, Passed:     3, Skipped:     0, Total:     3, Duration: 9 ms
</code></pre>
<ol start="5">
<li>Finalmente podemos confirmar con este patròn un desacoplamiento de la clase que lo ejecuta, asimismo la reglas de creación ya no dependen de las clausula IF-ELSE, por lo que para crear un nuevo tipo de tarjeta solo será necesario crear una nueva clase basada en la clase abstracta de CreditCardFactoryMethod:</li>
</ol>
<p><img src="https://github.com/UPT-FAING-EPIS/SI889_PDS/assets/10199939/bbad4ef3-4f18-4db3-85c0-c7f4f28e5ef0" alt="image"></p>
<ol start="6">
<li>En el terminal, ejecutar el siguiente comando para generar el reporte de cobertura en formato markdown.</li>
</ol>
<pre><code class="lang-Bash">ReportGenerator &quot;-reports:./*/*/*/coverage.cobertura.xml&quot; &quot;-targetdir:Cobertura&quot; -reporttypes:MarkdownSummaryGithub
</code></pre>
<ol start="7">
<li>En el terminal, ejecutar el siguiente comando para generar el diagrama de clases respectivo</li>
</ol>
<pre><code class="lang-Bash">dll2mmd -f Bank.Domain/bin/Debug/net8.0/Bank.Domain.dll -o disenio.md
</code></pre>
<ol start="8">
<li>En el terminal, ejecutar el siguiente comando para generar el diagrama de clases respectivo</li>
</ol>
<pre><code class="lang-Bash">docfx init -y
</code></pre>
<ol start="9">
<li>En el Visual Studio Code, eliminar los archivos de la carpeta o directorio docs, seguidamente modificar los archivos con el siguiente contenido:</li>
</ol>
<blockquote>
<p>docfx.json</p>
</blockquote>
<pre><code class="lang-Json">{
  &quot;$schema&quot;: &quot;https://raw.githubusercontent.com/dotnet/docfx/main/schemas/docfx.schema.json&quot;,
  &quot;metadata&quot;: [
    {
      &quot;src&quot;: [
        {
          &quot;src&quot;: &quot;.&quot;,
          &quot;files&quot;: [
            &quot;**/*.csproj&quot;
          ]
        }
      ],
      &quot;dest&quot;: &quot;docs&quot;
    }
  ],
  &quot;build&quot;: {
    &quot;content&quot;: [
      {
        &quot;files&quot;: [
          &quot;**/*.{md,yml}&quot;
        ],
        &quot;exclude&quot;: [
          &quot;_site/**&quot;
        ]
      }
    ],
    &quot;resource&quot;: [
      {
        &quot;files&quot;: [
          &quot;images/**&quot;
        ]
      }
    ],
    &quot;output&quot;: &quot;_site&quot;,
    &quot;template&quot;: [
      &quot;default&quot;,
      &quot;modern&quot;
    ],
    &quot;globalMetadata&quot;: {
      &quot;_appName&quot;: &quot;Bank.App&quot;,
      &quot;_appTitle&quot;: &quot;Bank App&quot;,
      &quot;_enableSearch&quot;: true,
      &quot;pdf&quot;: true
    }
  }
}
</code></pre>
<blockquote>
<p>toc.yml</p>
</blockquote>
<pre><code class="lang-Yaml">- name: Docs
  href: docs/
</code></pre>
<blockquote>
<p>index.md</p>
</blockquote>
<pre><code class="lang-Markdown">---
_layout: landing
---

# This is the **HOMEPAGE**.

## [Diagrama de Clases](disenio.md)

## [Pruebas](Cobertura/SummaryGithub.md)
</code></pre>
<ol start="10">
<li>En el terminal, ejecutar el siguiente comando para generar la documentacion</li>
</ol>
<pre><code class="lang-Bash">docfx metadata docfx.json
docfx build
</code></pre>
<ol start="10">
<li>En un explorador de windows, ingresar a la ruta del proyecto dentro de la carpeta _site, abrir el archivo index.html, y debera visalizar algo como siguiente.</li>
</ol>
<p><img src="https://github.com/user-attachments/assets/a1fecda2-20e3-4811-9237-b79209bb4577" alt="image"></p>
<hr>
<h2 id="actividades-encargadas">Actividades Encargadas</h2>
<ol>
<li>Completar la documentación de todas las clases y generar una automatizaciòn .github/workflows/publish_docs.yml (Github Workflow) utilizando DocFx (init, metadata y build) y publicar el site de documentaciòn generado en un Github Page.</li>
<li>Generar una automatización de nombre .github/workflows/package_nuget.yml (Github Workflow) que ejecute:
<ul>
<li>Pruebas unitarias y reporte de pruebas automatizadas</li>
<li>Realice el analisis con SonarCloud.</li>
<li>Contruya un archivo .nuget a partir del proyecto Bank.Domain y lo publique como un Paquete de Github</li>
</ul>
</li>
<li>Generar una automatización de nombre .github/workflows/release_version.yml (Github Workflow) que contruya la version (release) del paquete y publique en Github Releases e incluya pero ahi no esta el test unitaroi</li>
</ol>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/UPT-FAING-EPIS/lab-2025-ii-pds-u2-01-cs-nkmelndz/blob/main/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
